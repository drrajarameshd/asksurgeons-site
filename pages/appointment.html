---
layout: default
title: Appointment Enquiry
permalink: /appointment/
---

<link rel="stylesheet" href="{{ '/assets/css/form.css' | relative_url }}">

<main class="as-appointment-page" id="main">
  <section class="as-appointment" aria-labelledby="appt-title">
    <h1 id="appt-title">Appointment Enquiry</h1>

    <form id="patientForm" novalidate>
      <label for="name">Name</label>
      <input type="text" id="name" name="name" required>
      <div id="nameError" class="error-text">Name is required.</div>

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" required>
      <div id="phoneError" class="error-text">Enter a valid 10-digit Indian phone number.</div>

      <label for="email">Email</label>
      <input type="email" id="email" name="email">
      <div id="emailError" class="error-text">Please enter a valid email address.</div>

      <label for="message">Message</label>
      <textarea id="message" name="message" rows="4" required></textarea>
      <div id="messageError" class="error-text">Message is required.</div>

      <button type="submit" id="submitBtn" class="btn">Send Enquiry</button>
    </form>

    <div id="toast" role="status" aria-live="polite"></div>
  </section>
</main>

 <script>
    const form = document.getElementById('patientForm');
    const btn = document.getElementById('submitBtn');
    const toast = document.getElementById('toast');
    const whatsappBtn = document.querySelector('.whatsapp-float');

    function showToast(msg, type='success') {
      toast.textContent = msg;
      toast.className = `show ${type}`;
      setTimeout(() => toast.className = toast.className.replace('show',''), 4000);
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      document.querySelectorAll('.error-text').forEach(el => el.style.display='none');
      let valid = true;

      if (!form.name.value.trim()) {
        document.getElementById('nameError').style.display='block'; valid=false;
      }
      if (!/^[6-9]\d{9}$/.test(form.phone.value.trim())) {
        document.getElementById('phoneError').style.display='block'; valid=false;
      }
      if (!form.message.value.trim()) {
        document.getElementById('messageError').style.display='block'; valid=false;
      }

      const emailVal = form.email.value.trim();
      if (emailVal && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailVal)) {
        document.getElementById('emailError').style.display='block'; valid=false;
      }

      if (!valid) return;

      btn.disabled = true;
      btn.textContent = '⏳ Sending...';

      fetch('https://script.google.com/macros/s/AKfycbxVT3_NEgcvGYZZAgEeOahRydyRZLkWLqTWJyZXRUl1okMJKRvW4TmldK4DxYKhgfvmrA/exec', {
        method:'POST',
        body: JSON.stringify({
          name: form.name.value.trim(),
          phone: form.phone.value.trim(),
          email: form.email.value.trim(),
          message: form.message.value.trim()
        })
      })
      .then(res => res.text())
      .then(() => { showToast('✅ Enquiry submitted successfully!', 'success'); form.reset(); })
      .catch(() => { showToast('❌ Submission failed. Please try again.', 'error'); })
      .finally(() => { btn.disabled = false; btn.textContent = 'Send Enquiry'; });
    });

  </script>
