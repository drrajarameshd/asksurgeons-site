<!-- _includes/footer.html -->
<footer role="contentinfo">
  <div class="container footer-inner footer">
    <div class="footer-grid">
      <!-- Contact (hard-coded) -->
      <div>
        <h4>Contact</h4>
        <div class="muted">Phone (Primary): +91 8062182411</div>
        <div class="muted">Clinic Number: +91 79896 76770</div>
        <div class="muted">Email: <a href="mailto:asksurgeons@gmail.com">asksurgeons@gmail.com</a></div>
        <div class="muted">Address: Hyderabad</div>
      </div>

      <!-- Quick Links (hard-coded paths for your GitHub Pages project) -->
      <div>
        <h4>Quick Links</h4>
        <a href="/asksurgeons-site/">Home</a><br/>
        <a href="/asksurgeons-site/about/">About</a><br/>
        <a href="/asksurgeons-site/services/">Services</a><br/>
        <a href="/asksurgeons-site/blog/">Blog</a><br/>
        <a href="/asksurgeons-site/doctors/">Doctors</a><br/>
        <a href="https://app.asksurgeons.com">Book Appointment</a>
      </div>

      <!-- Doctors scroller (data-driven) -->
      <div>
        <h4>Our Specialists</h4>
        <div id="as-docs-scroller" tabindex="0" aria-label="Doctors list (scroll horizontally)">
          <div id="as-docs-track">
            {%- assign doctors = site.data.doctors -%}
            {%- for d in doctors -%}
            <div class="doc-card">
              <img loading="lazy"
                   src="{{ d.image | prepend: '/asksurgeons-site' }}"
                   alt="{{ d.name }}"
                   onerror="this.src='/asksurgeons-site/assets/images/site-images/doctor-placeholder.webp'">
              <div class="meta">
                <div class="name">{{ d.name }}</div>
                <div class="qual">{{ d.bio }}</div>
                <div class="dept">{{ d.department }}</div>
              </div>
            </div>
            {%- endfor -%}
            {%- for d in doctors -%}
            <div class="doc-card">
              <img loading="lazy"
                   src="{{ d.image | prepend: '/asksurgeons-site' }}"
                   alt="{{ d.name }}"
                   onerror="this.src='/asksurgeons-site/assets/images/site-images/doctor-placeholder.webp'">
              <div class="meta">
                <div class="name">{{ d.name }}</div>
                <div class="qual">{{ d.bio }}</div>
                <div class="dept">{{ d.department }}</div>
              </div>
            </div>
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>

    <div class="muted" style="margin-top:14px;">© <span id="as-year">2025</span> AskSurgeons.com • Hyderabad</div>
  </div>

  <!-- tiny helper to auto-scroll the doctors strip -->
  <script>
(function () {
  const scroller = document.getElementById('as-docs-scroller');
  const track = document.getElementById('as-docs-track');
  const yearEl = document.getElementById('as-year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();
  if (!scroller || !track) return;

  // iOS smooth momentum scroll
  scroller.style.webkitOverflowScrolling = 'touch';

  // If there aren't enough cards to scroll, bail early
  if (track.scrollWidth <= scroller.clientWidth) return;

  let rafId = null;
  let pos = scroller.scrollLeft || 0;
  const SPEED = 0.6; // px per frame

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  function frame() {
    const loopWidth = Math.max(1, track.scrollWidth / 2); // list is duplicated once
    pos = (pos + SPEED) % loopWidth;
    scroller.scrollLeft = pos;
    rafId = requestAnimationFrame(frame);
  }
  function start() { if (!prefersReduced) { cancelAnimationFrame(rafId); rafId = requestAnimationFrame(frame); } }
  function stop()  { cancelAnimationFrame(rafId); }

  // Start
  start();

  // Pause on hover/touch/focus
  scroller.addEventListener('mouseenter', stop);
  scroller.addEventListener('mouseleave', start);
  scroller.addEventListener('focusin',  stop);
  scroller.addEventListener('focusout', start);
  scroller.addEventListener('touchstart', stop, { passive: true });
  scroller.addEventListener('touchend',   start, { passive: true });

  // Pause when user wheels horizontally, resume after a moment
  scroller.addEventListener('wheel', function (e) {
    if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
      stop();
      scroller.scrollLeft += e.deltaX;
      clearTimeout(scroller.__resumeTimer);
      scroller.__resumeTimer = setTimeout(start, 800);
      e.preventDefault();
    }
  }, { passive: false });

  // Save battery: pause when tab is hidden
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) stop(); else start();
  });
})();
</script>
</footer>
