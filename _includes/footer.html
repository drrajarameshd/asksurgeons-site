<!-- _includes/footer.html -->
<footer role="contentinfo">
  <div class="container footer-inner footer">
    <div class="footer-grid">
      <!-- Contact (hard-coded) -->
      <div>
        <h4>Contact</h4>
        <div class="muted">Phone (Primary): +91 8062182411</div>
        <div class="muted">Clinic Number: +91 79896 76770</div>
        <div class="muted">Email: <a href="mailto:asksurgeons@gmail.com">asksurgeons@gmail.com</a></div>
        <div class="muted">Address: Hyderabad</div>
      </div>

      <!-- Quick Links (hard-coded paths for your GitHub Pages project) -->
      <div>
        <h4>Quick Links</h4>
        <a href="/asksurgeons-site/">Home</a><br/>
        <a href="/asksurgeons-site/about/">About</a><br/>
        <a href="/asksurgeons-site/services/">Services</a><br/>
        <a href="/asksurgeons-site/blog/">Blog</a><br/>
        <a href="/asksurgeons-site/doctors/">Doctors</a><br/>
        <a href="https://app.asksurgeons.com">Book Appointment</a>
      </div>

      <!-- Doctors scroller (data-driven) -->
      <div>
        <h4>Our Specialists</h4>
        <div id="as-docs-scroller" tabindex="0" aria-label="Doctors list (scroll horizontally)">
          <div id="as-docs-track">
            {%- assign doctors = site.data.doctors -%}
            {%- for d in doctors -%}
            <div class="doc-card">
              <img loading="lazy"
                   src="{{ d.image | prepend: '/asksurgeons-site' }}"
                   alt="{{ d.name }}"
                   onerror="this.src='/asksurgeons-site/assets/images/site-images/doctor-placeholder.webp'">
              <div class="meta">
                <div class="name">{{ d.name }}</div>
                <div class="qual">{{ d.bio }}</div>
                <div class="dept">{{ d.department }}</div>
              </div>
            </div>
            {%- endfor -%}
            {%- for d in doctors -%}
            <div class="doc-card">
              <img loading="lazy"
                   src="{{ d.image | prepend: '/asksurgeons-site' }}"
                   alt="{{ d.name }}"
                   onerror="this.src='/asksurgeons-site/assets/images/site-images/doctor-placeholder.webp'">
              <div class="meta">
                <div class="name">{{ d.name }}</div>
                <div class="qual">{{ d.bio }}</div>
                <div class="dept">{{ d.department }}</div>
              </div>
            </div>
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>

    <div class="muted" style="margin-top:14px;">© <span id="as-year">2025</span> AskSurgeons.com • Hyderabad</div>
  </div>

  <!-- tiny helper to auto-scroll the doctors strip -->

<script>
(function(){
  const scroller = document.getElementById('as-docs-scroller');
  const track    = document.getElementById('as-docs-track');
  const yearEl   = document.getElementById('as-year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();
  if (!scroller || !track) return;

  // Ensure single row
  track.style.display = 'flex';
  track.style.flexWrap = 'nowrap';

  // If not wide enough to scroll, bail out
  if (track.scrollWidth <= scroller.clientWidth) return;

  let x = 0;                // current translateX
  let rafId = null;
  const SPEED = 0.35;       // px/frame for auto-scroll (tweak as you like)
  const halfWidth = () => track.scrollWidth / 2; // list duplicated once

  function render() {
    // loop at half track width for a seamless cycle
    if (-x >= halfWidth()) x = 0;
    track.style.transform = `translate3d(${x}px,0,0)`;
  }

  // ---- Auto-scroll ----
  const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
  function frame(){
    x -= SPEED;
    render();
    rafId = requestAnimationFrame(frame);
  }
  function start(){ if (!prefersReduced) { cancelAnimationFrame(rafId); rafId = requestAnimationFrame(frame); } }
  function stop(){  cancelAnimationFrame(rafId); }

  // Start auto-scroll
  start();

  // ---- Drag to scroll (touch/mouse/pointer) ----
  let isDragging = false;
  let startClientX = 0;
  let startX = 0;          // x at drag start
  let resumeTimer = null;

  function onPointerDown(e){
    // only primary button
    if (e.button !== undefined && e.button !== 0) return;
    isDragging = true;
    scroller.classList.add('dragging');
    stop();                          // pause auto-scroll
    startClientX = e.clientX ?? (e.touches && e.touches[0].clientX);
    startX = x;
    // capture pointer to keep receiving move events
    if (scroller.setPointerCapture && e.pointerId !== undefined) {
      scroller.setPointerCapture(e.pointerId);
    }
  }

  function onPointerMove(e){
    if (!isDragging) return;
    const clientX = e.clientX ?? (e.touches && e.touches[0].clientX);
    if (clientX == null) return;
    const delta = clientX - startClientX;
    x = startX + delta;              // drag = translate the track
    // Wrap x within [-halfWidth, 0) to keep it seamless
    const hw = halfWidth();
    if (-x >= hw) x += hw;           // dragged past loop end → wrap
    if (x > 0) x -= hw;              // dragged past start → wrap from left
    render();
    e.preventDefault();
  }

  function onPointerUp(){
    if (!isDragging) return;
    isDragging = false;
    scroller.classList.remove('dragging');
    clearTimeout(resumeTimer);
    resumeTimer = setTimeout(start, 800); // resume auto-scroll after idle
  }

  // Pointer events (modern browsers)
  if (window.PointerEvent){
    scroller.addEventListener('pointerdown', onPointerDown, {passive:false});
    window.addEventListener('pointermove', onPointerMove, {passive:false});
    window.addEventListener('pointerup',   onPointerUp,   {passive:true});
    window.addEventListener('pointercancel', onPointerUp, {passive:true});
  } else {
    // Fallback: touch + mouse
    scroller.addEventListener('mousedown', onPointerDown);
    window.addEventListener('mousemove', onPointerMove);
    window.addEventListener('mouseup',   onPointerUp);
    scroller.addEventListener('touchstart', onPointerDown, {passive:false});
    window.addEventListener('touchmove',  onPointerMove,  {passive:false});
    window.addEventListener('touchend',   onPointerUp,    {passive:true});
    window.addEventListener('touchcancel',onPointerUp,    {passive:true});
  }

  // Pause on hover (desktop) and when tab is hidden
  scroller.addEventListener('mouseenter', stop);
  scroller.addEventListener('mouseleave', () => { if (!isDragging) start(); });
  document.addEventListener('visibilitychange', () => document.hidden ? stop() : (!isDragging && start()));
})();
</script>
  
</footer>
